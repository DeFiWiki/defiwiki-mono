{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/not-sync/git2/defiwiki-mono/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"C:/not-sync/git2/defiwiki-mono/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchJson = void 0;\n\nvar cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\n\nfunction fetchJson(_x) {\n  return _fetchJson.apply(this, arguments);\n}\n\nfunction _fetchJson() {\n  _fetchJson = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var opts,\n        res,\n        text,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            opts = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (opts.body) {\n              Object.assign(opts, {\n                body: JSON.stringify(opts.body),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n            }\n\n            _context.next = 4;\n            return cross_fetch_1.default(url, opts);\n\n          case 4:\n            res = _context.sent;\n\n            if (res.ok) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 8;\n            return res.text();\n\n          case 8:\n            text = _context.sent;\n            throw new Error(\"HTTP request to '\".concat(url, \"' failed with status '\").concat(res.statusText, \"': \").concat(text));\n\n          case 10:\n            return _context.abrupt(\"return\", res.json());\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchJson.apply(this, arguments);\n}\n\nexports.fetchJson = fetchJson;","map":{"version":3,"sources":["../../src/utils/http-utils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,IAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAAA;;SAQsB,S;;;;;wEAAf,iBAAyB,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsC,YAAA,IAAtC,2DAAwD,EAAxD;;AACH,gBAAI,IAAI,CAAC,IAAT,EAAe;AACX,cAAA,MAAM,CAAC,MAAP,CAAc,IAAd,EAAoB;AAChB,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe,IAAI,CAAC,IAApB,CADU;AAEhB,gBAAA,OAAO,EAAE;AAAE,kCAAgB;AAAlB;AAFO,eAApB;AAIH;;AANE;AAAA,mBAOe,aAAA,CAAA,OAAA,CAAM,GAAN,EAAW,IAAX,CAPf;;AAAA;AAOG,YAAA,GAPH;;AAAA,gBAQE,GAAG,CAAC,EARN;AAAA;AAAA;AAAA;;AAAA;AAAA,mBASoB,GAAG,CAAC,IAAJ,EATpB;;AAAA;AASO,YAAA,IATP;AAAA,kBAUO,IAAI,KAAJ,4BAA8B,GAA9B,mCAA0D,GAAG,CAAC,UAA9D,gBAA8E,IAA9E,EAVP;;AAAA;AAAA,6CAaI,GAAG,CAAC,IAAJ,EAbJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAAP,OAAA,CAAA,SAAA,GAAA,SAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchJson = void 0;\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nasync function fetchJson(url, opts = {}) {\n    if (opts.body) {\n        Object.assign(opts, {\n            body: JSON.stringify(opts.body),\n            headers: { 'Content-Type': 'application/json' }\n        });\n    }\n    const res = await cross_fetch_1.default(url, opts);\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`HTTP request to '${url}' failed with status '${res.statusText}': ${text}`);\n    }\n    return res.json();\n}\nexports.fetchJson = fetchJson;\n//# sourceMappingURL=http-utils.js.map"]},"metadata":{},"sourceType":"script"}