{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:/not-sync/git2/defiwiki-mono/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/not-sync/git2/defiwiki-mono/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LoggerProviderBase = exports.ServiceLoggerBase = exports.DiagnosticsLoggerBase = exports.LogLevel = exports.LogStyle = void 0;\nvar LogStyle;\n\n(function (LogStyle) {\n  LogStyle[\"verbose\"] = \"info\";\n  LogStyle[\"info\"] = \"info\";\n  LogStyle[\"imp\"] = \"imp\";\n  LogStyle[\"warn\"] = \"warn\";\n  LogStyle[\"err\"] = \"err\";\n})(LogStyle = exports.LogStyle || (exports.LogStyle = {}));\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"verbose\"] = 0] = \"verbose\";\n  LogLevel[LogLevel[\"debug\"] = 1] = \"debug\";\n  LogLevel[LogLevel[\"important\"] = 2] = \"important\";\n  LogLevel[LogLevel[\"warn\"] = 3] = \"warn\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n\nvar DiagnosticsLoggerBase = /*#__PURE__*/function () {\n  function DiagnosticsLoggerBase(logLevel, logToFiles, fileLogger) {\n    _classCallCheck(this, DiagnosticsLoggerBase);\n\n    this.logLevel = logLevel;\n    this.includeStackTrace = this.logLevel <= LogLevel.debug ? true : false;\n    this.logToFiles = logToFiles;\n    this.fileLogger = fileLogger;\n  }\n\n  _createClass(DiagnosticsLoggerBase, [{\n    key: \"write\",\n    value: function write(content) {\n      this.debug(content);\n    }\n  }, {\n    key: \"verbose\",\n    value: function verbose(content) {\n      if (this.logLevel > LogLevel.verbose) {\n        return;\n      }\n\n      this.log(LogStyle.verbose, content);\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(content) {\n      if (this.logLevel > LogLevel.debug) {\n        return;\n      }\n\n      this.log(LogStyle.info, content);\n    }\n  }, {\n    key: \"imp\",\n    value: function imp(content) {\n      if (this.logLevel > LogLevel.important) {\n        return;\n      }\n\n      this.log(LogStyle.imp, content);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(content) {\n      this.log(LogStyle.warn, content);\n    }\n  }, {\n    key: \"err\",\n    value: function err(content) {\n      this.log(LogStyle.err, content);\n    }\n  }, {\n    key: \"log\",\n    value: function log(style, content) {\n      throw new Error('Not implmented in base class');\n    }\n  }]);\n\n  return DiagnosticsLoggerBase;\n}();\n\nexports.DiagnosticsLoggerBase = DiagnosticsLoggerBase;\n\nvar ServiceLoggerBase = /*#__PURE__*/function () {\n  function ServiceLoggerBase(service, logLevel, logToFiles, stream) {\n    _classCallCheck(this, ServiceLoggerBase);\n\n    this.service = service;\n    this.logLevel = logLevel;\n    this.logToFiles = logToFiles;\n    this.stream = stream;\n    this.logToConsole = this.logLevel <= LogLevel.debug;\n  }\n\n  _createClass(ServiceLoggerBase, [{\n    key: \"log\",\n    value: function log(serviceLog) {\n      this.write(this.format(serviceLog));\n    }\n  }, {\n    key: \"write\",\n    value: function write(message) {\n      var now = new Date();\n      message = \"[\".concat(now.toUTCString(), \"] service=\").concat(this.service, \" \").concat(message);\n\n      if (this.logToConsole) {\n        console.log(message);\n      }\n    }\n  }, {\n    key: \"format\",\n    value: function format(serviceLog) {\n      throw new Error('Not implmented in base class');\n    }\n  }]);\n\n  return ServiceLoggerBase;\n}();\n\nexports.ServiceLoggerBase = ServiceLoggerBase;\nvar DEFAULT_LOG_CONFIG = {\n  logLevel: LogLevel.important,\n  logToFiles: false\n};\n\nvar LoggerProviderBase = /*#__PURE__*/function () {\n  function LoggerProviderBase() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var fileLoggerFactory = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, LoggerProviderBase);\n\n    this.config = {\n      logLevel: config.logLevel !== undefined ? config.logLevel : DEFAULT_LOG_CONFIG.logLevel,\n      logToFiles: config.logToFiles !== undefined ? config.logToFiles : DEFAULT_LOG_CONFIG.logToFiles,\n      logDirectory: config.logDirectory\n    };\n    this._fileLoggerFactory = fileLoggerFactory;\n\n    if (this.config.logToFiles && !this._fileLoggerFactory) {\n      throw new Error(\"Must provide a FileLoggerFactory in order to log to files\");\n    }\n\n    this._diagnosticLogger = this._makeDiagnosticLogger();\n  }\n\n  _createClass(LoggerProviderBase, [{\n    key: \"_makeDiagnosticLogger\",\n    value: function _makeDiagnosticLogger() {\n      throw new Error('Not implmented in base class');\n    }\n  }, {\n    key: \"getDiagnosticsLogger\",\n    value: function getDiagnosticsLogger() {\n      return this._diagnosticLogger;\n    }\n  }, {\n    key: \"makeServiceLogger\",\n    value: function makeServiceLogger(serviceName) {\n      throw new Error('Not implmented in base class');\n    }\n  }]);\n\n  return LoggerProviderBase;\n}();\n\nexports.LoggerProviderBase = LoggerProviderBase;","map":{"version":3,"sources":["../src/logger-base.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoggerProviderBase = exports.ServiceLoggerBase = exports.DiagnosticsLoggerBase = exports.LogLevel = exports.LogStyle = void 0;\nvar LogStyle;\n(function (LogStyle) {\n    LogStyle[\"verbose\"] = \"info\";\n    LogStyle[\"info\"] = \"info\";\n    LogStyle[\"imp\"] = \"imp\";\n    LogStyle[\"warn\"] = \"warn\";\n    LogStyle[\"err\"] = \"err\";\n})(LogStyle = exports.LogStyle || (exports.LogStyle = {}));\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"verbose\"] = 0] = \"verbose\";\n    LogLevel[LogLevel[\"debug\"] = 1] = \"debug\";\n    LogLevel[LogLevel[\"important\"] = 2] = \"important\";\n    LogLevel[LogLevel[\"warn\"] = 3] = \"warn\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nclass DiagnosticsLoggerBase {\n    constructor(logLevel, logToFiles, fileLogger) {\n        this.logLevel = logLevel;\n        this.includeStackTrace = this.logLevel <= LogLevel.debug ? true : false;\n        this.logToFiles = logToFiles;\n        this.fileLogger = fileLogger;\n    }\n    write(content) {\n        this.debug(content);\n    }\n    verbose(content) {\n        if (this.logLevel > LogLevel.verbose) {\n            return;\n        }\n        this.log(LogStyle.verbose, content);\n    }\n    debug(content) {\n        if (this.logLevel > LogLevel.debug) {\n            return;\n        }\n        this.log(LogStyle.info, content);\n    }\n    imp(content) {\n        if (this.logLevel > LogLevel.important) {\n            return;\n        }\n        this.log(LogStyle.imp, content);\n    }\n    warn(content) {\n        this.log(LogStyle.warn, content);\n    }\n    err(content) {\n        this.log(LogStyle.err, content);\n    }\n    log(style, content) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.DiagnosticsLoggerBase = DiagnosticsLoggerBase;\nclass ServiceLoggerBase {\n    constructor(service, logLevel, logToFiles, stream) {\n        this.service = service;\n        this.logLevel = logLevel;\n        this.logToFiles = logToFiles;\n        this.stream = stream;\n        this.logToConsole = this.logLevel <= LogLevel.debug;\n    }\n    log(serviceLog) {\n        this.write(this.format(serviceLog));\n    }\n    write(message) {\n        const now = new Date();\n        message = `[${now.toUTCString()}] service=${this.service} ${message}`;\n        if (this.logToConsole) {\n            console.log(message);\n        }\n    }\n    format(serviceLog) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.ServiceLoggerBase = ServiceLoggerBase;\nconst DEFAULT_LOG_CONFIG = {\n    logLevel: LogLevel.important,\n    logToFiles: false\n};\nclass LoggerProviderBase {\n    constructor(config = {}, fileLoggerFactory) {\n        this.config = {\n            logLevel: config.logLevel !== undefined ? config.logLevel : DEFAULT_LOG_CONFIG.logLevel,\n            logToFiles: config.logToFiles !== undefined ? config.logToFiles : DEFAULT_LOG_CONFIG.logToFiles,\n            logDirectory: config.logDirectory,\n        };\n        this._fileLoggerFactory = fileLoggerFactory;\n        if (this.config.logToFiles && !this._fileLoggerFactory) {\n            throw new Error(\"Must provide a FileLoggerFactory in order to log to files\");\n        }\n        this._diagnosticLogger = this._makeDiagnosticLogger();\n    }\n    _makeDiagnosticLogger() {\n        throw new Error('Not implmented in base class');\n    }\n    getDiagnosticsLogger() {\n        return this._diagnosticLogger;\n    }\n    makeServiceLogger(serviceName) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.LoggerProviderBase = LoggerProviderBase;\n//# sourceMappingURL=logger-base.js.map"]},"metadata":{},"sourceType":"script"}